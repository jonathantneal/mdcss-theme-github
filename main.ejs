<!doctype html>
<title><%- options.title || 'Style Guide' %></title>
<meta charset="utf-8">
<link href="style.css" rel="stylesheet">
<script src="prism.js"></script>
<script src="script.js"></script>
<header>
	<nav>
		<img src="<%- options.logo || 'https://i.imgur.com/3rqeZXi.png' %>" alt="Style Guide">
		<%

		function renderNavigation(children, depth) { %>
			<ul><%

				if (depth < 3) children.forEach(function (child) {
					if (child.name) {

						%>
						<li>
							<a href="#<%- child.name %>"><%- child.title %></a>
							<%

							if (child.children.length) renderNavigation(child.children, depth + 1);

							%>
						</li>
						<%

					}
				});

			%></ul>
		<% }

		renderNavigation(children, 1);
		%>
	</nav>
</header>
<main><%

function renderSections(children, depth) {
	children.forEach(function (child) {
		if (child.name) { %>
			<section id="<%= child.name %>">
				<h<%= depth %> class="doc-section-heading"><%= child.title %></h<%= depth %>>

				<div>
					<%- child.content %>
					<%

					if (child.children) {
						renderSections(child.children, depth + 1);
					}

					%>
				</div>
			</section>
		<% } else { %>
			<section>
				<div>
					<%- child.content %>
					<%

					if (child.children) {
						renderSections(child.children, depth + 1);
					}

					%>
				</div>
			</section>
		<% }
	});
}

renderSections(children, 2);

%></main>
